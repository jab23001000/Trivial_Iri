<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="robots" content="noindex">
  <title>Trivial Iñigo & Ainara</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f8f9fa;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    #app {
      max-width: 800px;
      background: white;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      text-align: center;
      margin: 1rem;
    }
    h1, h2, h3 { margin-bottom: 1rem; }
    .hidden { display: none; }
    input[type="text"] {
      padding: 0.6rem;
      font-size: 1rem;
      width: 85%;
      margin-top: 0.25rem;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    button {
      margin: 1rem 0.5rem;
      padding: 0.7rem 1.2rem;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background-color: #007bff;
      color: white;
    }
    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    #timer {
      font-weight: bold;
      color: #d9534f;
      margin-top: 1rem;
    }
    .sub-question { margin-top: 1rem; text-align: left; }
    .sub-question p { margin: 0.5rem 0 0.25rem; }
    .badge {
      display: inline-block;
      background: #eef7ee;
      color: #167b16;
      border: 1px solid #bfe5bf;
      padding: 0.25rem 0.5rem;
      border-radius: 6px;
      margin-top: 0.75rem;
      font-weight: bold;
    }
    .muted { color: #666; font-size: 0.95rem; }
    #union-result {
      font-size: 1.8rem;
      font-weight: 800;
      letter-spacing: 1px;
      margin-top: 0.5rem;
    }
    a { color: #0d6efd; }
  </style>
</head>
<body>
  <div id="app">
    <!-- Landing -->
    <div id="landing">
      <h1>Bienvenidos Iñigo y Ainara</h1>
      <h2>¿Listos para comenzar vuestro Trivial?</h2>
      <p class="muted">
        Vais a comenzar una serie de preguntas.<br>
        Las deberéis responder correctamente para obtener un número que debéis anotar.<br>
        Para cada pregunta habrá un número secreto revelado.<br>
        En la última pregunta se mostrará un número de teléfono al cual deberéis enviar un WhatsApp con la frase: <strong>QUIERO MI DINERO</strong>.
      </p>
      <button id="startBtn">Comenzar</button>
    </div>

    <!-- Juego -->
    <div id="game" class="hidden">
      <h2 id="question"></h2>
      <div id="feedback"></div>
      <button id="checkBtn">Comprobar respuesta</button>
      <div id="timer" class="hidden"></div>
      <div>
        <button id="prevBtn">Anterior</button>
        <button id="nextBtn" disabled>Siguiente</button>
      </div>
    </div>

    <!-- Final (sin input: muestra la unión de todos los N) -->
    <div id="final" class="hidden">
      <h2>Resultado final</h2>
      <p>La unión de todos los números obtenidos es:</p>
      <div id="union-result"></div>
      <p class="muted" style="margin-top:1rem;">
        Ese es el número al cual deberéis enviar un WhatsApp con la frase: <strong>QUIERO MI DINERO</strong>.
      </p>
    </div>
  </div>

  <script>
    // ─────────────────────────────────────────────────────────────────────────────
    // Preguntas (múltiples y simples). Normaliza respuestas (mayúsc/tildes).
    // ─────────────────────────────────────────────────────────────────────────────
    const preguntas = [
      { 
        q: "Preguntas sobre ciclismo 1",
        subQuestions: [
          { text: "¿En qué puerto de montaña se produjo la famosa explosión de Induráin que le costó perder la Vuelta a España frente a Delgado y Parra? El puerto de...", answer: "Navacerrada" },
          { text: "¿Y en qué año?", answer: "1985" }
        ],
        n: 6
      },
      { 
        q: "Preguntas sobre + ciclismo",
        subQuestions: [
          { text: "¿Qué marca introdujo por primera vez un cuadro de fibra de carbono en el Tour de Francia", answer: "Look" },
          { text: "¿Y en qué año?", answer: "1985" }
        ],
        n: 9
      },
      
      
      
      { 
        q: "Ve el siguiente video:",
        sub: '<a href="https://www.youtube.com/watch?v=N3PmMLH0ji0" target="_blank">Abrir video en YouTube</a><br>En el video se dice la frase: Estos cachorros de tejón han salido de su madriguera para...',
        a: "explorar",
        n: 0
      },


      { 
        q: "Ve el siguiente video:",
        sub: '<a href="https://www.youtube.com/watch?v=Ev2QXUg3I4A" target="_blank">Abrir video en YouTube</a><br>Cuando quedan 7.9km para la cima, ¿qué distancia, en segundos, saca la cabeza de carrera al siguiente grupo?',
        a: "43",
        n: 93
      },


      
       { 
        q: "Ve el siguiente video:",
        sub: '<a href="https://www.youtube.com/watch?v=J9kgpvnErT8" target="_blank">Abrir video en YouTube</a><br>Según la teoría terraplanista que se explica en el video, ¿cuál es el continente con mayor superficie?',
        a: "antártico",
        n: 45
      }, 
      
      
      
     
      
      
      
      { 
        q: "Pregunta sobre squash:",
        sub: '¿Quién fue el primer jugador en ganar el título de Campeón del Mundo de Squash PSA en 1976?',
        a: "Geoff Hunt",
        n: 94
      },
      
     
    ];

    // Estado
    let current = 0;
    let numeros = Array(preguntas.length).fill(null); // guarda N cuando está correcta
    let timerInterval;

    // Elementos
    const landing = document.getElementById("landing");
    const game = document.getElementById("game");
    const final = document.getElementById("final");

    const questionEl = document.getElementById("question");
    const feedbackEl = document.getElementById("feedback");
    const timerEl = document.getElementById("timer");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const checkBtn = document.getElementById("checkBtn");
    const unionResult = document.getElementById("union-result");

    document.getElementById("startBtn").onclick = startGame;
    prevBtn.onclick = prevQuestion;
    nextBtn.onclick = nextQuestion;
    checkBtn.onclick = checkAnswer;

    // Normaliza mayúsculas/minúsculas y elimina tildes
    function normalizar(texto) {
      return (texto || "")
        .toLowerCase()
        .normalize("NFD")
        .replace(/[\u0300-\u036f]/g, "");
    }

    function startGame() {
      landing.classList.add("hidden");
      game.classList.remove("hidden");
      loadQuestion();
    }

    function loadQuestion() {
      clearInterval(timerInterval);
      timerEl.classList.add("hidden");
      timerEl.textContent = "";
      feedbackEl.innerHTML = "";

      const currentQ = preguntas[current];

      // Título + subtítulo (con enlace)
      if (currentQ.sub) {
        questionEl.innerHTML = `<strong>${currentQ.q}</strong><br><small>${currentQ.sub}</small>`;
      } else {
        questionEl.textContent = currentQ.q;
      }

      // Generar inputs (múltiple o simple)
      if (currentQ.subQuestions) {
        currentQ.subQuestions.forEach((sq, idx) => {
          const div = document.createElement("div");
          div.classList.add("sub-question");
          div.innerHTML = `
            <p>${sq.text}</p>
            <input type="text" id="ans-${idx}" placeholder="Escribe tu respuesta">
            <span id="res-${idx}"></span>
          `;
          feedbackEl.appendChild(div);
        });
      } else {
        const div = document.createElement("div");
        div.innerHTML = `<input type="text" id="answer" placeholder="Escribe tu respuesta">`;
        feedbackEl.appendChild(div);
      }

      // Si ya estaba resuelta, muestro el número y bloqueo inputs/botón
      if (numeros[current] !== null) {
        mostrarNumeroYAsegurarBloqueo(currentQ);
      }

      prevBtn.disabled = current === 0;
      nextBtn.disabled = numeros[current] === null; // sólo activo si está resuelta
      checkBtn.disabled = numeros[current] !== null;
    }

    function mostrarNumeroYAsegurarBloqueo(currentQ) {
      // Aviso del número revelado
      const badge = document.createElement("div");
      badge.className = "badge";
      badge.textContent = `¡Correcto! Tu número es: ${numeros[current]}.`;
      feedbackEl.appendChild(badge);

      // Bloquear inputs y poner marcas si es múltiple
      if (currentQ.subQuestions) {
        currentQ.subQuestions.forEach((sq, idx) => {
          const input = document.getElementById(`ans-${idx}`);
          const resEl = document.getElementById(`res-${idx}`);
          if (input) input.disabled = true;
          if (resEl && !resEl.textContent.trim()) {
            resEl.textContent = " ✅ Correcto";
          }
        });
      } else {
        const input = document.getElementById("answer");
        if (input) input.disabled = true;
      }
    }

    function checkAnswer() {
      const currentQ = preguntas[current];

      if (currentQ.subQuestions) {
        let allCorrect = true;

        currentQ.subQuestions.forEach((sq, idx) => {
          const userResp = normalizar(document.getElementById(`ans-${idx}`).value.trim());
          const correct = normalizar(sq.answer);

          const resEl = document.getElementById(`res-${idx}`);
          if (userResp === correct) {
            resEl.textContent = " ✅ Correcto";
          } else {
            resEl.textContent = " ❌ Incorrecto";
            allCorrect = false;
          }
        });

        if (allCorrect) {
          numeros[current] = currentQ.n;
          checkBtn.disabled = true;
          nextBtn.disabled = false;
          startTimer();
          mostrarNumeroYAsegurarBloqueo(currentQ);
        }

      } else {
        const respuesta = normalizar(document.getElementById("answer").value.trim());
        // Permite string o array de respuestas válidas
        const correctas = Array.isArray(currentQ.a)
          ? currentQ.a.map(normalizar)
          : [normalizar(currentQ.a)];

        if (correctas.includes(respuesta)) {
          numeros[current] = currentQ.n;
          checkBtn.disabled = true;
          nextBtn.disabled = false;
          startTimer();
          mostrarNumeroYAsegurarBloqueo(currentQ);
        } else {
          const p = document.createElement("p");
          p.textContent = "❌ Respuesta incorrecta. Intenta de nuevo.";
          feedbackEl.appendChild(p);
        }
      }
    }

    function startTimer() {
      let t = 20;
      timerEl.classList.remove("hidden");
      timerEl.textContent = `Avanzando en ${t} segundos...`;
      clearInterval(timerInterval);
      timerInterval = setInterval(() => {
        t--;
        timerEl.textContent = `Avanzando en ${t} segundos...`;
        if (t <= 0) {
          clearInterval(timerInterval);
          nextQuestion();
        }
      }, 1000);
    }

    function nextQuestion() {
      if (numeros[current] === null) return;
      if (current < preguntas.length - 1) {
        current++;
        loadQuestion();
      } else {
        // Fin del juego: mostrar la UNIÓN de todos los N
        game.classList.add("hidden");
        final.classList.remove("hidden");
        const union = numeros.join("");
        unionResult.textContent = union;
      }
    }

    function prevQuestion() {
      if (current > 0) {
        current--;
        loadQuestion();
      }
    }
  </script>
</body>
</html>









