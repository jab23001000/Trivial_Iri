<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="robots" content="noindex">
  <title>Trivial I√±igo & Ainara</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f8f9fa;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    #app {
      max-width: 700px;
      background: white;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      text-align: center;
    }
    h1, h2, h3 {
      margin-bottom: 1rem;
    }
    .hidden {
      display: none;
    }
    input[type="text"], input[type="number"] {
      padding: 0.5rem;
      font-size: 1rem;
      width: 80%;
      margin-top: 0.5rem;
    }
    button {
      margin: 1rem 0.5rem;
      padding: 0.7rem 1.2rem;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background-color: #007bff;
      color: white;
    }
    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    #timer {
      font-weight: bold;
      color: #d9534f;
      margin-top: 1rem;
    }
    #final-msg {
      font-size: 1.5rem;
      color: green;
    }
    #error-msg {
      color: red;
      font-weight: bold;
    }
    .sub-question {
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <div id="app">
    <!-- Landing -->
    <div id="landing">
      <h1>Bienvenidos I√±igo y Ainara</h1>
      <h2>¬øListos para comenzar vuestro Trivial?</h2>
      <p>
        Vais a comenzar una serie de preguntas.<br>
        Las deber√©is responder correctamente para obtener un n√∫mero que deb√©is anotar.<br>
        Para cada pregunta habr√° un n√∫mero.<br>
        La pregunta final ser√° la UNION de todos los n√∫meros anteriores.<br>
        Que ser√° un n√∫mero de tel√©fono al cual deber√©is enviar un whatsapp con la frase: QUIERO MI DINERO
      </p>
      <button id="startBtn">Comenzar</button>
    </div>

    <!-- Juego -->
    <div id="game" class="hidden">
      <h2 id="question"></h2>
      <div id="feedback"></div>
      <button id="checkBtn">Comprobar respuesta</button>
      <div id="timer" class="hidden"></div>
      <div>
        <button id="prevBtn">Anterior</button>
        <button id="nextBtn" disabled>Siguiente</button>
      </div>
    </div>

    <!-- Final -->
    <div id="final" class="hidden">
      <h2>Pregunta final</h2>
      <p>Introduce la suma de todos los n√∫meros obtenidos:</p>
      <input type="number" id="finalInput">
      <button id="checkFinalBtn">Comprobar</button>
      <div id="error-msg"></div>
      <div id="final-msg"></div>
    </div>
  </div>

  <script>
    // Preguntas: Ejemplo de 1 m√∫ltiple + 3 normales
    const preguntas = [
      { 
        q: "Preguntas sobre ciclismo",
        subQuestions: [
          { text: "¬øEn qu√© puerto de monta√±a se produjo la famosa explosi√≥n de Indur√°in que le cost√≥ perder la Vuelta a Espa√±a frente a Delgado y Parra? El puerto de...", answer: "Navacerrada" },
          { text: "¬øY en qu√© a√±o?", answer: "1985" }
        ],
        n: 10
      },
      { 
        q: "Ve el siguiente video:", 
        sub: '<a href="https://www.youtube.com/watch?v=N3PmMLH0ji0" target="_blank">Abrir video en YouTube</a><br>En el video se dice la frase: Estos cachorros de tej√≥n han salido de su madriguera para...', 
        a: "explorar", 
        n: 8 
      },
      { 
        q: "Preguntas sobre + ciclismo",
        subQuestions: [
          { text: "¬øQu√© marca introdujo por primera vez un cuadro de fibra de carbono en el Tour de Francia", answer: "Look" },
          { text: "¬øY en qu√© a√±o?", answer: "1985" }
        ],
        n: 10
      },
      { 
        q: "Pregunta sobre squash:", 
        sub: '¬øQui√©n fue el primer jugador en ganar el t√≠tulo de Campe√≥n del Mundo de Squash PSA en 1976?', 
        a: "Geoff Hunt", 
        n: 8 
      },
      { 
        q: "Ve el siguiente video:", 
        sub: '<a href="https://www.youtube.com/watch?v=Ev2QXUg3I4A" target="_blank">Abrir video en YouTube</a><br>Cuando quedan 7.9km para la cima, qu√© distancia, en segundos, saca la cabeza de carrera al siguiente grupo', 
        a: "43", 
        n: 8 
      },
      { 
        q: "Ve el siguiente video:", 
        sub: '<a href="https://www.youtube.com/watch?v=J9kgpvnErT8" target="_blank">Abrir video en YouTube</a><br>Seg√∫n la teor√≠a terraplanista que se explica en el video, cu√°l es el continente con mayor superficie', 
        a: "ant√°rtico", 
        n: 8 
      },
      

      
    ];

    let current = 0;
    let numeros = Array(preguntas.length).fill(null);
    let timerInterval;

    const landing = document.getElementById("landing");
    const game = document.getElementById("game");
    const final = document.getElementById("final");

    const questionEl = document.getElementById("question");
    const feedbackEl = document.getElementById("feedback");
    const timerEl = document.getElementById("timer");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const checkBtn = document.getElementById("checkBtn");
    const finalInput = document.getElementById("finalInput");
    const checkFinalBtn = document.getElementById("checkFinalBtn");
    const errorMsg = document.getElementById("error-msg");
    const finalMsg = document.getElementById("final-msg");

    document.getElementById("startBtn").onclick = startGame;
    prevBtn.onclick = prevQuestion;
    nextBtn.onclick = nextQuestion;
    checkBtn.onclick = checkAnswer;
    checkFinalBtn.onclick = checkFinal;

    function normalizar(texto) {
      return texto
        .toLowerCase()
        .normalize("NFD")
        .replace(/[\u0300-\u036f]/g, "");
    }

    function startGame() {
      landing.classList.add("hidden");
      game.classList.remove("hidden");
      loadQuestion();
    }

    function loadQuestion() {
      clearInterval(timerInterval);
      timerEl.classList.add("hidden");
      timerEl.textContent = "";
      feedbackEl.innerHTML = "";

      let currentQ = preguntas[current];

      if (currentQ.sub) {
        questionEl.innerHTML = `<strong>${currentQ.q}</strong><br><small>${currentQ.sub}</small>`;
      } else {
        questionEl.textContent = currentQ.q;
      }

      // Generar inputs
      if (currentQ.subQuestions) {
        currentQ.subQuestions.forEach((sq, idx) => {
          const div = document.createElement("div");
          div.classList.add("sub-question");
          div.innerHTML = `
            <p>${sq.text}</p>
            <input type="text" id="ans-${idx}" placeholder="Escribe tu respuesta">
            <span id="res-${idx}"></span>
          `;
          feedbackEl.appendChild(div);
        });
      } else {
        const div = document.createElement("div");
        div.innerHTML = `<input type="text" id="answer" placeholder="Escribe tu respuesta">`;
        feedbackEl.appendChild(div);
      }

      prevBtn.disabled = current === 0;
      nextBtn.disabled = !numeros[current];
      checkBtn.disabled = !!numeros[current];
    }

    function checkAnswer() {
      const currentQ = preguntas[current];

      if (currentQ.subQuestions) {
        let allCorrect = true;

        currentQ.subQuestions.forEach((sq, idx) => {
          const userResp = normalizar(document.getElementById(`ans-${idx}`).value.trim());
          const correct = normalizar(sq.answer);

          const resEl = document.getElementById(`res-${idx}`);
          if (userResp === correct) {
            resEl.textContent = " ‚úÖ Correcto";
          } else {
            resEl.textContent = " ‚ùå Incorrecto";
            allCorrect = false;
          }
        });

        if (allCorrect) {
          numeros[current] = currentQ.n;
          nextBtn.disabled = false;
          checkBtn.disabled = true;
          startTimer();
        }

      } else {
        const respuesta = normalizar(document.getElementById("answer").value.trim());
        const correcta = normalizar(currentQ.a);

        if (respuesta === correcta) {
          numeros[current] = currentQ.n;
          feedbackEl.innerHTML += `<p>¬°Correcto! Tu n√∫mero es: ${numeros[current]}. An√≥talo.</p>`;
          nextBtn.disabled = false;
          checkBtn.disabled = true;
          startTimer();
        } else {
          feedbackEl.innerHTML += `<p>‚ùå Respuesta incorrecta. Intenta de nuevo.</p>`;
        }
      }
    }

    function startTimer() {
      let t = 20;
      timerEl.classList.remove("hidden");
      timerEl.textContent = `Avanzando en ${t} segundos...`;
      timerInterval = setInterval(() => {
        t--;
        timerEl.textContent = `Avanzando en ${t} segundos...`;
        if (t <= 0) {
          clearInterval(timerInterval);
          nextQuestion();
        }
      }, 1000);
    }

    function nextQuestion() {
      if (!numeros[current]) return; 
      if (current < preguntas.length - 1) {
        current++;
        loadQuestion();
      } else {
        game.classList.add("hidden");
        final.classList.remove("hidden");
      }
    }

    function prevQuestion() {
      if (current > 0) {
        current--;
        loadQuestion();
      }
    }

    function checkFinal() {
      const sumaCorrecta = numeros.reduce((a, b) => a + b, 0);
      const userSum = parseInt(finalInput.value, 10);
      if (userSum === sumaCorrecta) {
        errorMsg.textContent = "";
        finalMsg.textContent = "üéâ Pruebas completadas, solicita tu premio! üéâ";
      } else {
        finalMsg.textContent = "";
        errorMsg.textContent = "‚ùå La suma es incorrecta. Intenta de nuevo.";
      }
    }
  </script>
</body>
</html>



